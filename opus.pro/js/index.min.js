/**
 * Skipped minification because the original files appears to be already minified.
 * Original file: /npm/statsig-sidecar@2.0.3/dist/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
(()=>{"use strict";var e={509:(e,t,n)=>{var i,r,s;Object.defineProperty(t,"__esModule",{value:!0}),t._getInstance=t._getStatsigGlobalFlag=t._getStatsigGlobal=void 0,t._getStatsigGlobal=()=>__STATSIG__||c,t._getStatsigGlobalFlag=e=>(0,t._getStatsigGlobal)()[e],t._getInstance=e=>{const n=(0,t._getStatsigGlobal)();return e?n.instances&&n.instances[e]:n.lastInstance};const o="__STATSIG__",a="undefined"!=typeof window?window:{},l=void 0!==n.g?n.g:{},u="undefined"!=typeof globalThis?globalThis:{},c=null!==(s=null!==(r=null!==(i=a[o])&&void 0!==i?i:l[o])&&void 0!==r?r:u[o])&&void 0!==s?s:{instance:t._getInstance};a[o]=c,l[o]=c,u[o]=c},681:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._getStorageKey=t._getUserStorageKey=void 0;const i=n(918);function r(e,t,n){var r;if(n)return n(e,t);const s=t&&t.customIDs?t.customIDs:{},o=[`uid:${null!==(r=null==t?void 0:t.userID)&&void 0!==r?r:""}`,`cids:${Object.keys(s).sort(((e,t)=>e.localeCompare(t))).map((e=>`${e}-${s[e]}`)).join(",")}`,`k:${e}`];return(0,i._DJB2)(o.join("|"))}t._getUserStorageKey=r,t._getStorageKey=function(e,t,n){return t?r(e,t,n):(0,i._DJB2)(`k:${e}`)}},683:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},257:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DataAdapterCore=void 0;const r=n(24),s=n(626),o=n(570),a=n(638),l=n(705);function u(e,t,n,i){return{source:e,data:t,receivedAt:Date.now(),stableID:n,fullUserHash:(0,o._getFullUserHash)(i)}}t.DataAdapterCore=class{constructor(e,t){this._adapterName=e,this._cacheSuffix=t,this._options=null,this._sdkKey=null,this._lastModifiedStoreKey=`statsig.last_modified_time.${t}`,this._inMemoryCache=new c}attach(e,t){this._sdkKey=e,this._options=t}getDataSync(e){const t=e&&(0,o._normalizeUser)(e,this._options),n=this._getCacheKey(t),i=this._inMemoryCache.get(n,t);if(i)return i;const r=this._loadFromCache(n);return r?(this._inMemoryCache.add(n,r),this._inMemoryCache.get(n,t)):null}setData(e,t){const n=t&&(0,o._normalizeUser)(t,this._options),i=this._getCacheKey(n);this._inMemoryCache.add(i,u("Bootstrap",e,null,n))}_getDataAsyncImpl(e,t,n){return i(this,void 0,void 0,(function*(){a.Storage.isReady()||(yield a.Storage.isReadyResolver());const i=null!=e?e:this.getDataSync(t),s=[this._fetchAndPrepFromNetwork(i,t,n)];return(null==n?void 0:n.timeoutMs)&&s.push(new Promise((e=>setTimeout(e,n.timeoutMs))).then((()=>(r.Log.debug("Fetching latest value timed out"),null)))),yield Promise.race(s)}))}_prefetchDataImpl(e,t){return i(this,void 0,void 0,(function*(){const n=e&&(0,o._normalizeUser)(e,this._options),i=this._getCacheKey(n),r=yield this._getDataAsyncImpl(null,n,t);r&&this._inMemoryCache.add(i,Object.assign(Object.assign({},r),{source:"Prefetch"}))}))}_fetchAndPrepFromNetwork(e,t,n){return i(this,void 0,void 0,(function*(){let i=null;e&&this._isCachedResultValidFor204(e,t)&&(i=e.data);const o=yield this._fetchFromNetwork(i,t,n);if(!o)return r.Log.debug("No response returned for latest value"),null;const a=(0,l._typedJsonParse)(o,"has_updates","Response"),c=this._getSdkKey(),d=s.StableID.get(c);let _=null;if(!0===(null==a?void 0:a.has_updates))_=u("Network",o,d,t);else{if(!i||!1!==(null==a?void 0:a.has_updates))return null;_=u("NetworkNotModified",i,d,t)}const g=this._getCacheKey(t);return this._inMemoryCache.add(g,_),this._writeToCache(g,_),_}))}_getSdkKey(){return null!=this._sdkKey?this._sdkKey:(r.Log.error(`${this._adapterName} is not attached to a Client`),"")}_loadFromCache(e){var t;const n=null===(t=a.Storage.getItem)||void 0===t?void 0:t.call(a.Storage,e);if(null==n)return null;const i=(0,l._typedJsonParse)(n,"source","Cached Result");return i?Object.assign(Object.assign({},i),{source:"Cache"}):null}_writeToCache(e,t){a.Storage.setItem(e,JSON.stringify(t)),this._runLocalStorageCacheEviction(e)}_runLocalStorageCacheEviction(e){var t;const n=null!==(t=(0,a._getObjectFromStorage)(this._lastModifiedStoreKey))&&void 0!==t?t:{};n[e]=Date.now();const i=d(n,10);i&&(delete n[i],a.Storage.removeItem(i)),(0,a._setObjectInStorage)(this._lastModifiedStoreKey,n)}};class c{constructor(){this._data={}}get(e,t){var n;const i=this._data[e],s=null==i?void 0:i.stableID,o=null===(n=null==t?void 0:t.customIDs)||void 0===n?void 0:n.stableID;return o&&s&&o!==s?(r.Log.warn("'StatsigUser.customIDs.stableID' mismatch"),null):i}add(e,t){const n=d(this._data,9);n&&delete this._data[n],this._data[e]=t}merge(e){this._data=Object.assign(Object.assign({},this._data),e)}}function d(e,t){const n=Object.keys(e);return n.length<=t?null:n.reduce(((t,n)=>{const i=e[t],r=e[n];return"object"==typeof i&&"object"==typeof r?r.receivedAt<i.receivedAt?n:t:r<i?n:t}))}},882:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Diagnostics=void 0;const n=new Map,i="start",r="end";function s(e,t,n,i){return Object.assign({key:n,action:t,step:i,timestamp:Date.now()},e)}function o(e,t){var i;const r=null!==(i=n.get(e))&&void 0!==i?i:[];r.push(t),n.set(e,r)}function a(e,t){if(t in e)return e[t]}t.Diagnostics={_getMarkers:e=>n.get(e),_markInitOverallStart:e=>{o(e,s({},i,"overall"))},_markInitOverallEnd:(e,t,n)=>{o(e,s({success:t,error:t?void 0:{name:"InitializeError",message:"Failed to initialize"},evaluationDetails:n},r,"overall"))},_markInitNetworkReqStart:(e,t)=>{o(e,s(t,i,"initialize","network_request"))},_markInitNetworkReqEnd:(e,t)=>{o(e,s(t,r,"initialize","network_request"))},_markInitProcessStart:e=>{o(e,s({},i,"initialize","process"))},_markInitProcessEnd:(e,t)=>{o(e,s(t,r,"initialize","process"))},_clearMarkers:e=>{n.delete(e)},_formatError(e){if(e&&"object"==typeof e)return{code:a(e,"code"),name:a(e,"name"),message:a(e,"message")}},_getDiagnosticsData(e,n,i,r){var s;return{success:!0===(null==e?void 0:e.ok),statusCode:null==e?void 0:e.status,sdkRegion:null===(s=null==e?void 0:e.headers)||void 0===s?void 0:s.get("x-statsig-region"),isDelta:!0===i.includes('"is_delta":true')||void 0,attempt:n,error:t.Diagnostics._formatError(r)}},_enqueueDiagnosticsEvent(e,n,i,r){const s=t.Diagnostics._getMarkers(i);if(null==s||s.length<=0)return;t.Diagnostics._clearMarkers(i);const o=function(e,t){return{eventName:"statsig::diagnostics",user:e,value:null,metadata:t,time:Date.now()}}(e,{context:"initialize",markers:s.slice(),statsigOptions:r});n.enqueue(o)}}},387:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},358:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorBoundary=t.EXCEPTION_ENDPOINT=void 0;const r=n(24),s=n(305),o=n(512);t.EXCEPTION_ENDPOINT="https://statsigapi.net/v1/sdk_exception";const a="[Statsig] UnknownError";t.ErrorBoundary=class{constructor(e,t,n){this._sdkKey=e,this._options=t,this._emitter=n,this._seen=new Set}wrap(e){try{const t=e;(function(e){const t=new Set;let n=Object.getPrototypeOf(e);for(;n&&n!==Object.prototype;)Object.getOwnPropertyNames(n).filter((e=>"function"==typeof(null==n?void 0:n[e]))).forEach((e=>t.add(e))),n=Object.getPrototypeOf(n);return Array.from(t)})(t).forEach((n=>{const i=t[n];"$EB"in i||(t[n]=(...t)=>this._capture(n,(()=>i.apply(e,t))),t[n].$EB=!0)}))}catch(e){this._onError("eb:wrap",e)}}logError(e,t){this._onError(e,t)}_capture(e,t){try{const n=t();return n&&n instanceof Promise?n.catch((t=>this._onError(e,t))):n}catch(t){return this._onError(e,t),null}}_onError(e,n){try{r.Log.warn(`Caught error in ${e}`,{error:n}),(()=>i(this,void 0,void 0,(function*(){var i,r,l,u,c,d,_;const g=n||Error(a),h=g instanceof Error,v=h?g.name:"No Name";if(this._seen.has(v))return;if(this._seen.add(v),null===(r=null===(i=this._options)||void 0===i?void 0:i.networkConfig)||void 0===r?void 0:r.preventAllNetworkTraffic)return void(null===(l=this._emitter)||void 0===l||l.call(this,{name:"error",error:n}));const f=s.SDKType._get(this._sdkKey),p=o.StatsigMetadataProvider.get(),m=h?g.stack:function(e){try{return JSON.stringify(e)}catch(e){return a}}(g),y=JSON.stringify(Object.assign({tag:e,exception:v,info:m},Object.assign(Object.assign({},p),{sdkType:f}))),S=null!==(d=null===(c=null===(u=this._options)||void 0===u?void 0:u.networkConfig)||void 0===c?void 0:c.networkOverrideFunc)&&void 0!==d?d:fetch;yield S(t.EXCEPTION_ENDPOINT,{method:"POST",headers:{"STATSIG-API-KEY":this._sdkKey,"STATSIG-SDK-TYPE":String(f),"STATSIG-SDK-VERSION":String(p.sdkVersion),"Content-Type":"application/json"},body:y}),null===(_=this._emitter)||void 0===_||_.call(this,{name:"error",error:n})})))().then((()=>{})).catch((()=>{}))}catch(e){}}}},194:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},913:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},434:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.EventLogger=void 0;const r=n(681),s=n(918),o=n(24),a=n(610),l=n(414),u=n(253),c=n(638),d=n(678),_=n(701),g={},h=e=>{var t;null===(t=g[e])||void 0===t||t.flush().catch((()=>{}))};t.EventLogger=class{constructor(e,t,n,i){var r;this._sdkKey=e,this._emitter=t,this._network=n,this._options=i,this._queue=[],this._lastExposureTimeMap={},this._nonExposedChecks={},this._hasRunQuickFlush=!1,this._creationTime=Date.now(),this._isLoggingDisabled=!0===(null==i?void 0:i.disableLogging),this._maxQueueSize=null!==(r=null==i?void 0:i.loggingBufferMaxSize)&&void 0!==r?r:50;const s=null==i?void 0:i.networkConfig;this._logEventUrl=(0,d._getOverridableUrl)(null==s?void 0:s.logEventUrl,null==s?void 0:s.api,"/rgstr",a.NetworkDefault.eventsApi)}setLoggingDisabled(e){this._isLoggingDisabled=e}enqueue(e){this._shouldLogEvent(e)&&(this._normalizeAndAppendEvent(e),this._quickFlushIfNeeded(),this._queue.length>this._maxQueueSize&&h(this._sdkKey))}incrementNonExposureCount(e){var t;const n=null!==(t=this._nonExposedChecks[e])&&void 0!==t?t:0;this._nonExposedChecks[e]=n+1}reset(){this._lastExposureTimeMap={}}start(){(0,l._isServerEnv)()||(g[this._sdkKey]=this,(0,_._subscribeToVisiblityChanged)((e=>{"background"===e&&h(this._sdkKey)})),this._retryFailedLogs(),this._startBackgroundFlushInterval())}stop(){return i(this,void 0,void 0,(function*(){this._flushIntervalId&&(clearInterval(this._flushIntervalId),this._flushIntervalId=null),yield this.flush()}))}flush(){return i(this,void 0,void 0,(function*(){if(this._appendAndResetNonExposedChecks(),0===this._queue.length)return;const e=this._queue;return this._queue=[],this._sendEvents(e)}))}_quickFlushIfNeeded(){this._hasRunQuickFlush||(this._hasRunQuickFlush=!0,Date.now()-this._creationTime>200||setTimeout((()=>h(this._sdkKey)),200))}_shouldLogEvent(e){if((0,l._isServerEnv)())return!1;if(!(0,u._isExposureEvent)(e))return!0;const t=e.user?e.user:{statsigEnvironment:void 0},n=(0,r._getUserStorageKey)(this._sdkKey,t),i=e.metadata?e.metadata:{},s=[e.eventName,n,i.gate,i.config,i.ruleID].join("|"),o=this._lastExposureTimeMap[s],a=Date.now();return!(o&&a-o<6e4||(Object.keys(this._lastExposureTimeMap).length>1e3&&(this._lastExposureTimeMap={}),this._lastExposureTimeMap[s]=a,0))}_sendEvents(e){var t,n;return i(this,void 0,void 0,(function*(){if(this._isLoggingDisabled)this._saveFailedLogsToStorage(e);else try{(!(0,_._isCurrentlyVisible)()&&this._network.isBeaconSupported()&&null==(null===(n=null===(t=this._options)||void 0===t?void 0:t.networkConfig)||void 0===n?void 0:n.networkOverrideFunc)?yield this._sendEventsViaBeacon(e):yield this._sendEventsViaPost(e)).success?this._emitter({name:"logs_flushed",events:e}):this._saveFailedLogsToStorage(e)}catch(e){o.Log.warn("Failed to flush events.")}}))}_sendEventsViaPost(e){var t;return i(this,void 0,void 0,(function*(){const n=yield this._network.post(this._getRequestData(e)),i=null!==(t=null==n?void 0:n.code)&&void 0!==t?t:-1;return{success:i>=200&&i<300}}))}_sendEventsViaBeacon(e){return i(this,void 0,void 0,(function*(){return{success:yield this._network.beacon(this._getRequestData(e))}}))}_getRequestData(e){return{sdkKey:this._sdkKey,data:{events:e},url:this._logEventUrl,retries:3,isCompressable:!0,params:{[a.NetworkParam.EventCount]:String(e.length)}}}_saveFailedLogsToStorage(e){for(;e.length>500;)e.shift();const t=this._getStorageKey();try{(0,c._setObjectInStorage)(t,e)}catch(e){o.Log.warn("Unable to save failed logs to storage")}}_retryFailedLogs(){const e=this._getStorageKey();(()=>i(this,void 0,void 0,(function*(){c.Storage.isReady()||(yield c.Storage.isReadyResolver());const t=(0,c._getObjectFromStorage)(e);t&&(c.Storage.removeItem(e),yield this._sendEvents(t))})))().catch((()=>{o.Log.warn("Failed to flush stored logs")}))}_getStorageKey(){return`statsig.failed_logs.${(0,s._DJB2)(this._sdkKey)}`}_normalizeAndAppendEvent(e){e.user&&(e.user=Object.assign({},e.user),delete e.user.privateAttributes);const t={},n=this._getCurrentPageUrl();n&&(t.statsigMetadata={currentPage:n});const i=Object.assign(Object.assign({},e),t);o.Log.debug("Enqueued Event:",i),this._queue.push(i)}_appendAndResetNonExposedChecks(){0!==Object.keys(this._nonExposedChecks).length&&(this._normalizeAndAppendEvent({eventName:"statsig::non_exposed_checks",user:null,time:Date.now(),metadata:{checks:Object.assign({},this._nonExposedChecks)}}),this._nonExposedChecks={})}_getCurrentPageUrl(){var e;if(!1!==(null===(e=this._options)||void 0===e?void 0:e.includeCurrentPageUrlWithEvents))return(0,l._getCurrentPageUrlSafe)()}_startBackgroundFlushInterval(){var e,t;const n=null!==(t=null===(e=this._options)||void 0===e?void 0:e.loggingIntervalMs)&&void 0!==t?t:1e4,i=setInterval((()=>{g[this._sdkKey]._flushIntervalId!==i?clearInterval(i):h(this._sdkKey)}),n);this._flushIntervalId=i}}},918:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._getSortedObject=t._DJB2Object=t._DJB2=void 0;const i=n(10);t._DJB2=e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return String(t>>>0)},t._DJB2Object=(e,n)=>(0,t._DJB2)(JSON.stringify((0,t._getSortedObject)(e,n))),t._getSortedObject=(e,n)=>{if(null==e)return null;const r=Object.keys(e).sort(),s={};return r.forEach((r=>{const o=e[r];0!==n&&"object"===(0,i._typeOf)(o)?s[r]=(0,t._getSortedObject)(o,null!=n?n-1:n):s[r]=o})),s}},61:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},24:(e,t)=>{function n(e){return e.unshift("[Statsig]"),e}var i;Object.defineProperty(t,"__esModule",{value:!0}),t.Log=t.LogLevel=void 0,function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Warn=2]="Warn",e[e.Info=3]="Info",e[e.Debug=4]="Debug"}(i||(t.LogLevel=i={}));class r{static info(...e){this.level>=i.Info&&console.info("[34m%s[0m","  INFO ",...n(e))}static debug(...e){this.level>=i.Debug&&console.debug("[32m%s[0m"," DEBUG ",...n(e))}static warn(...e){this.level>=i.Warn&&console.warn("[33m%s[0m","  WARN ",...n(e))}static error(...e){this.level>=i.Error&&console.error("[31m%s[0m"," ERROR ",...n(e))}}t.Log=r,r.level=i.Warn},610:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkParam=t.NetworkDefault=void 0,t.NetworkDefault={eventsApi:"https://prodregistryv2.org/v1",initializeApi:"https://featureassets.org/v1",specsApi:"https://assetsconfigcdn.org/v1"},function(e){e.EventCount="ec",e.SdkKey="k",e.SdkType="st",e.SdkVersion="sv",e.Time="t",e.SessionID="sid",e.StatsigEncoded="se",e.IsGzipped="gz"}(n||(t.NetworkParam=n={}))},703:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkCore=void 0,n(509);const r=n(509),s=n(882),o=n(24),a=n(610),l=n(305),u=n(414),c=n(839),d=n(626),_=n(512),g=n(701),h=new Set([408,500,502,503,504,522,524,599]);t.NetworkCore=class{constructor(e,t){this._emitter=t,this._timeout=1e4,this._netConfig={},this._options={},e&&(this._options=e),this._options.networkConfig&&(this._netConfig=this._options.networkConfig),this._netConfig.networkTimeoutMs&&(this._timeout=this._netConfig.networkTimeoutMs)}post(e){return i(this,void 0,void 0,(function*(){let t=yield this._getPopulatedBody(e);return e.isStatsigEncodable&&(t=this._attemptToEncodeString(e,t)),this._sendRequest(Object.assign({method:"POST",body:t},e))}))}get(e){return this._sendRequest(Object.assign({method:"GET"},e))}isBeaconSupported(){return"undefined"!=typeof navigator&&"function"==typeof navigator.sendBeacon}beacon(e){return i(this,void 0,void 0,(function*(){if(!v(e))return!1;const t=yield this._getPopulatedBody(e),n=yield this._getPopulatedURL(e),i=navigator;return i.sendBeacon.bind(i)(n,t)}))}_sendRequest(e){var t,n,r;return i(this,void 0,void 0,(function*(){if(!v(e))return null;if(this._netConfig.preventAllNetworkTraffic)return null;const{method:i,body:a,retries:l,attempt:u}=e,c=null!=u?u:1,d="undefined"!=typeof AbortController?new AbortController:null,_=setTimeout((()=>null==d?void 0:d.abort(`Timeout of ${this._timeout}ms expired.`)),this._timeout),f=yield this._getPopulatedURL(e);let p=null;const m=(0,g._isUnloading)();try{const n={method:i,body:a,headers:Object.assign({},e.headers),signal:null==d?void 0:d.signal,priority:e.priority,keepalive:m};e.isInitialize&&s.Diagnostics._markInitNetworkReqStart(e.sdkKey,{attempt:c});const r=null!==(t=this._netConfig.networkOverrideFunc)&&void 0!==t?t:fetch;if(p=yield r(f,n),clearTimeout(_),!p.ok){const e=yield p.text().catch((()=>"No Text")),t=new Error(`NetworkError: ${f} ${e}`);throw t.name="NetworkError",t}const o=yield p.text();return e.isInitialize&&s.Diagnostics._markInitNetworkReqEnd(e.sdkKey,s.Diagnostics._getDiagnosticsData(p,c,o)),{body:o,code:p.status}}catch(t){const a=function(e,t){return(null==e?void 0:e.signal.aborted)&&"string"==typeof e.signal.reason?e.signal.reason:"string"==typeof t?t:t instanceof Error?`${t.name}: ${t.message}`:"Unknown Error"}(d,t);return e.isInitialize&&s.Diagnostics._markInitNetworkReqEnd(e.sdkKey,s.Diagnostics._getDiagnosticsData(p,c,"",t)),!l||c>l||!h.has(null!==(n=null==p?void 0:p.status)&&void 0!==n?n:500)?(null===(r=this._emitter)||void 0===r||r.call(this,{name:"error",error:t}),o.Log.error(`A networking error occured during ${i} request to ${f}.`,a,t),null):this._sendRequest(Object.assign(Object.assign({},e),{retries:l,attempt:c+1}))}}))}_getPopulatedURL(e){return i(this,void 0,void 0,(function*(){const t=Object.assign({[a.NetworkParam.SdkKey]:e.sdkKey,[a.NetworkParam.SdkType]:l.SDKType._get(e.sdkKey),[a.NetworkParam.SdkVersion]:_.SDK_VERSION,[a.NetworkParam.Time]:String(Date.now()),[a.NetworkParam.SessionID]:yield c.SessionID.get(e.sdkKey)},e.params),n=Object.keys(t).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`)).join("&");return`${e.url}${n?`?${n}`:""}`}))}_getPopulatedBody(e){return i(this,void 0,void 0,(function*(){const{data:t,sdkKey:n}=e,i=d.StableID.get(n),r=c.SessionID.get(n),s=l.SDKType._get(n);return JSON.stringify(Object.assign(Object.assign({},t),{statsigMetadata:Object.assign(Object.assign({},_.StatsigMetadataProvider.get()),{stableID:i,sessionID:r,sdkType:s})}))}))}_attemptToEncodeString(e,t){var n,i;const s=(0,u._getWindowSafe)();if(!e.isStatsigEncodable||this._options.disableStatsigEncoding||null!=(0,r._getStatsigGlobalFlag)("no-encode")||!(null==s?void 0:s.btoa))return t;try{const r=null!==(n=s.btoa(t).split("").reverse().join(""))&&void 0!==n?n:t;return e.params=Object.assign(Object.assign({},null!==(i=e.params)&&void 0!==i?i:{}),{[a.NetworkParam.StatsigEncoded]:"1"}),r}catch(e){return o.Log.warn("/initialize request encoding failed"),t}}};const v=e=>!!e.sdkKey||(o.Log.warn("Unable to make request without an SDK key"),!1)},890:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},25:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},305:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SDKType=void 0;const n={};let i;t.SDKType={_get:e=>{var t;return(null!==(t=n[e])&&void 0!==t?t:"js-mono")+(null!=i?i:"")},_setClientType(e,t){n[e]=t},_setBindingType(e){i&&"-react"!==i||(i="-"+e)}}},414:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._getCurrentPageUrlSafe=t._addDocumentEventListenerSafe=t._addWindowEventListenerSafe=t._isServerEnv=t._getDocumentSafe=t._getWindowSafe=void 0,t._getWindowSafe=()=>"undefined"!=typeof window?window:null,t._getDocumentSafe=()=>{var e;const n=(0,t._getWindowSafe)();return null!==(e=null==n?void 0:n.document)&&void 0!==e?e:null},t._isServerEnv=()=>{if(null!==(0,t._getDocumentSafe)())return!1;const e="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node;return"string"==typeof EdgeRuntime||e},t._addWindowEventListenerSafe=(e,n)=>{const i=(0,t._getWindowSafe)();"function"==typeof(null==i?void 0:i.addEventListener)&&i.addEventListener(e,n)},t._addDocumentEventListenerSafe=(e,n)=>{const i=(0,t._getDocumentSafe)();"function"==typeof(null==i?void 0:i.addEventListener)&&i.addEventListener(e,n)},t._getCurrentPageUrlSafe=()=>{var e;try{return null===(e=(0,t._getWindowSafe)())||void 0===e?void 0:e.location.href.split(/[?#]/)[0]}catch(e){return}}},839:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigSession=t.SessionID=void 0;const i=n(681),r=n(24),s=n(638),o=n(47),a=18e5,l=144e5,u={};function c(e,t){return setTimeout((()=>{const t=null===__STATSIG__||void 0===__STATSIG__?void 0:__STATSIG__.instance(e);t&&t.$emt({name:"session_expired"})}),t)}function d(e){return`statsig.session_id.${(0,i._getStorageKey)(e)}`}t.SessionID={get:e=>t.StatsigSession.get(e).data.sessionID},t.StatsigSession={get:e=>(null==u[e]&&(u[e]=function(e){let t=function(e){const t=d(e);return(0,s._getObjectFromStorage)(t)}(e);const n=Date.now();return t||(t={sessionID:(0,o.getUUID)(),startTime:n,lastUpdate:n}),{data:t,sdkKey:e}}(e)),function(e){const t=Date.now(),n=e.data;(function({lastUpdate:e}){return Date.now()-e>a}(n)||function({startTime:e}){return Date.now()-e>l}(n))&&(n.sessionID=(0,o.getUUID)(),n.startTime=t),n.lastUpdate=t,function(e,t){const n=d(t);try{(0,s._setObjectInStorage)(n,e)}catch(e){r.Log.warn("Failed to save SessionID")}}(n,e.sdkKey),clearTimeout(e.idleTimeoutID),clearTimeout(e.ageTimeoutID);const i=t-n.startTime,u=e.sdkKey;return e.idleTimeoutID=c(u,a),e.ageTimeoutID=c(u,l-i),e}(u[e])),overrideInitialSessionID:(e,t)=>{u[t]=function(e,t){const n=Date.now();return{data:{sessionID:e,startTime:n,lastUpdate:n},sdkKey:t}}(e,t)}}},626:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StableID=void 0;const i=n(681),r=n(24),s=n(638),o=n(47),a={};function l(e){return`statsig.stable_id.${(0,i._getStorageKey)(e)}`}function u(e,t){const n=l(t);try{(0,s._setObjectInStorage)(n,e)}catch(e){r.Log.warn("Failed to save StableID")}}t.StableID={get:e=>{if(null==a[e]){let t=function(e){const t=l(e);return(0,s._getObjectFromStorage)(t)}(e);null==t&&(t=(0,o.getUUID)(),u(t,e)),a[e]=t}return a[e]},setOverride:(e,t)=>{a[t]=e,u(e,t)}}},351:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigClientBase=void 0,n(509);const r=n(509),s=n(358),o=n(434),a=n(24),l=n(414),u=n(839),c=n(638);t.StatsigClientBase=class{constructor(e,t,n,i){var d,_;this.loadingStatus="Uninitialized",this._listeners={};const g=this.$emt.bind(this);if(null!=(null==i?void 0:i.logLevel)&&(a.Log.level=i.logLevel),(null==i?void 0:i.disableStorage)&&c.Storage._setDisabled(!0),(null==i?void 0:i.initialSessionID)&&u.StatsigSession.overrideInitialSessionID(i.initialSessionID,e),(null==i?void 0:i.storageProvider)&&c.Storage._setProvider(i.storageProvider),this._sdkKey=e,this._options=null!=i?i:{},this.overrideAdapter=null!==(d=null==i?void 0:i.overrideAdapter)&&void 0!==d?d:null,this._logger=new o.EventLogger(e,g,n,i),this._errorBoundary=new s.ErrorBoundary(e,i,g),this._errorBoundary.wrap(this),this._errorBoundary.wrap(n),this._errorBoundary.wrap(t),this._errorBoundary.wrap(this._logger),!(0,l._isServerEnv)()){const t=(0,r._getStatsigGlobal)(),n=null!==(_=t.instances)&&void 0!==_?_:{},i=this;null!=n[e]&&a.Log.warn("Creating multiple Statsig clients with the same SDK key can lead to unexpected behavior. Multi-instance support requires different SDK keys."),n[e]=i,t.lastInstance=i,t.instances=n,__STATSIG__=t}this.dataAdapter=t,this.dataAdapter.attach(e,i),this.storageProvider=c.Storage,this._primeReadyRipcord()}updateRuntimeOptions(e){null!=e.disableLogging&&(this._options.disableLogging=e.disableLogging,this._logger.setLoggingDisabled(e.disableLogging)),null!=e.disableStorage&&(this._options.disableStorage=e.disableStorage,c.Storage._setDisabled(e.disableStorage))}flush(){return this._logger.flush()}shutdown(){return i(this,void 0,void 0,(function*(){this.$emt({name:"pre_shutdown"}),yield this._logger.stop()}))}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){if(this._listeners[e]){const n=this._listeners[e].indexOf(t);-1!==n&&this._listeners[e].splice(n,1)}}$on(e,t){t.__isInternal=!0,this.on(e,t)}$emt(e){var t;const n=t=>{try{t(e)}catch(n){if(!0===t.__isInternal)return void this._errorBoundary.logError(`__emit:${e.name}`,n);a.Log.error("An error occurred in a StatsigClientEvent listener. This is not an issue with Statsig.",e)}};this._listeners[e.name]&&this._listeners[e.name].forEach((e=>n(e))),null===(t=this._listeners["*"])||void 0===t||t.forEach(n)}_setStatus(e,t){this.loadingStatus=e,this.$emt({name:"values_updated",status:e,values:t})}_enqueueExposure(e,t,n){!0!==(null==n?void 0:n.disableExposureLog)?this._logger.enqueue(t):this._logger.incrementNonExposureCount(e)}}},180:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},166:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataAdapterCachePrefix=void 0,t.DataAdapterCachePrefix="statsig.cached"},253:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._createLayerParameterExposure=t._createConfigExposure=t._createGateExposure=t._isExposureEvent=void 0;const n="statsig::config_exposure",i="statsig::gate_exposure",r=(e,t,n,i,r)=>({eventName:e,user:t,value:null,metadata:s(n,i),secondaryExposures:r,time:Date.now()});t._isExposureEvent=({eventName:e})=>e===i||e===n,t._createGateExposure=(e,t)=>{var n,s;return r(i,e,t.details,{gate:t.name,gateValue:String(t.value),ruleID:t.ruleID},null!==(s=null===(n=t.__evaluation)||void 0===n?void 0:n.secondary_exposures)&&void 0!==s?s:[])},t._createConfigExposure=(e,t)=>{var i,s;return r(n,e,t.details,{config:t.name,ruleID:t.ruleID},null!==(s=null===(i=t.__evaluation)||void 0===i?void 0:i.secondary_exposures)&&void 0!==s?s:[])},t._createLayerParameterExposure=(e,t,n)=>{var i,s,o;const a=t.__evaluation,l=!0===(null===(i=null==a?void 0:a.explicit_parameters)||void 0===i?void 0:i.includes(n));let u="",c=null!==(s=null==a?void 0:a.undelegated_secondary_exposures)&&void 0!==s?s:[];return l&&(u=null!==(o=a.allocated_experiment_name)&&void 0!==o?o:"",c=a.secondary_exposures),r("statsig::layer_exposure",e,t.details,{config:t.name,parameterName:n,ruleID:t.ruleID,allocatedExperiment:u,isExplicitParameter:String(l)},c)};const s=(e,t)=>(t.reason=e.reason,e.lcut&&(t.lcut=String(e.lcut)),e.receivedAt&&(t.receivedAt=String(e.receivedAt)),t)},512:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigMetadataProvider=t.SDK_VERSION=void 0,t.SDK_VERSION="3.0.0";let n={sdkVersion:t.SDK_VERSION,sdkType:"js-mono"};t.StatsigMetadataProvider={get:()=>n,add:e=>{n=Object.assign(Object.assign({},n),e)}}},754:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},851:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._makeTypedGet=t._mergeOverride=t._makeLayer=t._makeExperiment=t._makeDynamicConfig=t._makeFeatureGate=void 0;const i=n(10),r="default";function s(e,t,n,i){var s;return{name:e,details:t,ruleID:null!==(s=null==n?void 0:n.rule_id)&&void 0!==s?s:r,__evaluation:n,value:i}}function o(e,t,n){var i;const r=null!==(i=null==n?void 0:n.value)&&void 0!==i?i:{};return Object.assign(Object.assign({},s(e,t,n,r)),{get:a(null==n?void 0:n.value)})}function a(e,t){return(n,r)=>{var s;const o=null!==(s=null==e?void 0:e[n])&&void 0!==s?s:null;return null==o?null!=r?r:null:null==r||(0,i._isTypeMatch)(o,r)?(null==t||t(n),o):null!=r?r:null}}t._makeFeatureGate=function(e,t,n){return s(e,t,n,!0===(null==n?void 0:n.value))},t._makeDynamicConfig=o,t._makeExperiment=function(e,t,n){var i;const r=o(e,t,n);return Object.assign(Object.assign({},r),{groupName:null!==(i=null==n?void 0:n.group_name)&&void 0!==i?i:null})},t._makeLayer=function(e,t,n,i){var r,o;return Object.assign(Object.assign({},s(e,t,n,void 0)),{get:a(null==n?void 0:n.value,i),groupName:null!==(r=null==n?void 0:n.group_name)&&void 0!==r?r:null,__value:null!==(o=null==n?void 0:n.value)&&void 0!==o?o:{}})},t._mergeOverride=function(e,t,n,i){return Object.assign(Object.assign(Object.assign({},e),t),{get:a(n,i)})},t._makeTypedGet=a},652:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},570:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._getFullUserHash=t._normalizeUser=void 0;const i=n(918),r=n(24);t._normalizeUser=function(e,t){try{const n=JSON.parse(JSON.stringify(e));return null!=t&&null!=t.environment&&(n.statsigEnvironment=t.environment),n}catch(e){return r.Log.error("Failed to JSON.stringify user"),{statsigEnvironment:void 0}}},t._getFullUserHash=function(e){return e?(0,i._DJB2Object)(e):null}},638:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._setObjectInStorage=t._getObjectFromStorage=t.Storage=void 0;const i=n(24),r=n(414),s={},o={isReady:()=>!0,isReadyResolver:()=>null,getProviderName:()=>"InMemory",getItem:e=>s[e]?s[e]:null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]},getAllKeys:()=>Object.keys(s)};let a=null;try{const e=(0,r._getWindowSafe)();e&&e.localStorage&&"function"==typeof e.localStorage.getItem&&(a={isReady:()=>!0,isReadyResolver:()=>null,getProviderName:()=>"LocalStorage",getItem:t=>e.localStorage.getItem(t),setItem:(t,n)=>e.localStorage.setItem(t,n),removeItem:t=>e.localStorage.removeItem(t),getAllKeys:()=>Object.keys(e.localStorage)})}catch(e){i.Log.warn("Failed to setup localStorageProvider.")}let l=null!=a?a:o,u=l;t.Storage={isReady:()=>u.isReady(),isReadyResolver:()=>u.isReadyResolver(),getProviderName:()=>u.getProviderName(),getItem:e=>function(n){try{return u.getItem(e)}catch(e){if(e instanceof Error&&"SecurityError"===e.name)return t.Storage._setProvider(o),null;throw e}}(),setItem:(e,t)=>u.setItem(e,t),removeItem:e=>u.removeItem(e),getAllKeys:()=>u.getAllKeys(),_setProvider:e=>{l=e,u=e},_setDisabled:e=>{u=e?o:l}},t._getObjectFromStorage=function(e){const n=t.Storage.getItem(e);return JSON.parse(null!=n?n:"null")},t._setObjectInStorage=function(e,n){t.Storage.setItem(e,JSON.stringify(n))}},705:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._typedJsonParse=void 0;const i=n(24);t._typedJsonParse=function(e,t,n){try{return JSON.parse(e)}catch(e){}return i.Log.error(`Failed to parse ${n}`),null}},10:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._isTypeMatch=t._typeOf=void 0,t._typeOf=function(e){return Array.isArray(e)?"array":typeof e},t._isTypeMatch=function(e,t){const n=e=>Array.isArray(e)?"array":typeof e;return n(e)===n(t)}},47:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUUID=void 0,t.getUUID=function(){if("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID();let e=(new Date).getTime(),t="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return`xxxxxxxx-xxxx-4xxx-${"89ab"[Math.floor(4*Math.random())]}xxx-xxxxxxxxxxxx`.replace(/[xy]/g,(n=>{let i=16*Math.random();return e>0?(i=(e+i)%16|0,e=Math.floor(e/16)):(i=(t+i)%16|0,t=Math.floor(t/16)),("x"===n?i:7&i|8).toString(16)}))}},678:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._getOverridableUrl=void 0,t._getOverridableUrl=function(e,t,n,i){return e||(t?`${t}${n}`:`${i}${n}`)}},701:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._notifyVisibilityChanged=t._subscribeToVisiblityChanged=t._isUnloading=t._isCurrentlyVisible=void 0;const i=n(414),r="foreground",s="background",o=[];let a=r,l=!1;t._isCurrentlyVisible=()=>a===r,t._isUnloading=()=>l,t._subscribeToVisiblityChanged=e=>{o.unshift(e)},t._notifyVisibilityChanged=e=>{e!==a&&(a=e,o.forEach((t=>t(e))))},(0,i._addWindowEventListenerSafe)("focus",(()=>{l=!1,(0,t._notifyVisibilityChanged)(r)})),(0,i._addWindowEventListenerSafe)("blur",(()=>(0,t._notifyVisibilityChanged)(s))),(0,i._addWindowEventListenerSafe)("beforeunload",(()=>{l=!0,(0,t._notifyVisibilityChanged)(s)})),(0,i._addDocumentEventListenerSafe)("visibilitychange",(()=>{(0,t._notifyVisibilityChanged)("visible"===document.visibilityState?r:s)}))},978:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.Diagnostics=t.Log=t.Storage=t.EventLogger=void 0,n(509);const s=n(882);Object.defineProperty(t,"Diagnostics",{enumerable:!0,get:function(){return s.Diagnostics}});const o=n(434);Object.defineProperty(t,"EventLogger",{enumerable:!0,get:function(){return o.EventLogger}});const a=n(24);Object.defineProperty(t,"Log",{enumerable:!0,get:function(){return a.Log}});const l=n(512),u=n(638);Object.defineProperty(t,"Storage",{enumerable:!0,get:function(){return u.Storage}}),r(n(509),t),r(n(681),t),r(n(683),t),r(n(257),t),r(n(882),t),r(n(387),t),r(n(358),t),r(n(194),t),r(n(913),t),r(n(918),t),r(n(61),t),r(n(24),t),r(n(703),t),r(n(610),t),r(n(890),t),r(n(25),t),r(n(414),t),r(n(305),t),r(n(839),t),r(n(626),t),r(n(351),t),r(n(180),t),r(n(166),t),r(n(253),t),r(n(512),t),r(n(754),t),r(n(851),t),r(n(652),t),r(n(570),t),r(n(638),t),r(n(705),t),r(n(10),t),r(n(678),t),r(n(47),t),r(n(701),t),__STATSIG__=Object.assign(Object.assign({},null!==__STATSIG__&&void 0!==__STATSIG__?__STATSIG__:{}),{Log:a.Log,SDK_VERSION:l.SDK_VERSION})},694:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._resolveDeltasResponse=void 0;const i=n(978);function r(e,t){null==e||e.forEach((e=>{delete t[e]}))}t._resolveDeltasResponse=function(e,t){const n=(0,i._typedJsonParse)(t,"checksum","DeltasEvaluationResponse");if(!n)return{hadBadDeltaChecksum:!0};const s=function(e){const t=e;return r(e.deleted_gates,t.feature_gates),delete t.deleted_gates,r(e.deleted_configs,t.dynamic_configs),delete t.deleted_configs,r(e.deleted_layers,t.layer_configs),delete t.deleted_layers,t}(function(e,t){return Object.assign(Object.assign(Object.assign({},e),t),{feature_gates:Object.assign(Object.assign({},e.feature_gates),t.feature_gates),layer_configs:Object.assign(Object.assign({},e.layer_configs),t.layer_configs),dynamic_configs:Object.assign(Object.assign({},e.dynamic_configs),t.dynamic_configs)})}(e,n)),o=(0,i._DJB2Object)({feature_gates:s.feature_gates,dynamic_configs:s.dynamic_configs,layer_configs:s.layer_configs},2);return o===n.checksumV2?JSON.stringify(s):{hadBadDeltaChecksum:!0,badChecksum:o,badMergedConfigs:s,badFullResponse:n.deltas_full_response}}},677:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(978);t.default=class{constructor(){this._rawValues=null,this._values=null,this._source="Uninitialized",this._lcut=0,this._receivedAt=0}reset(){this._values=null,this._rawValues=null,this._source="Loading",this._lcut=0,this._receivedAt=0}finalize(){this._values||(this._source="NoValues")}getValues(){return this._rawValues?(0,i._typedJsonParse)(this._rawValues,"has_updates","EvaluationStoreValues"):null}setValues(e){if(!e)return!1;const t=(0,i._typedJsonParse)(e.data,"has_updates","EvaluationResponse");return null!=t&&(this._source=e.source,!0!==(null==t?void 0:t.has_updates)||(this._rawValues=e.data,this._lcut=t.time,this._receivedAt=e.receivedAt,this._values=t),!0)}getGate(e){var t;return this._getDetailedStoreResult(null===(t=this._values)||void 0===t?void 0:t.feature_gates,e)}getConfig(e){var t;return this._getDetailedStoreResult(null===(t=this._values)||void 0===t?void 0:t.dynamic_configs,e)}getLayer(e){var t;return this._getDetailedStoreResult(null===(t=this._values)||void 0===t?void 0:t.layer_configs,e)}getParamStore(e){var t;return this._getDetailedStoreResult(null===(t=this._values)||void 0===t?void 0:t.param_stores,e)}_getDetailedStoreResult(e,t){let n=null;return e&&(n=e[t]?e[t]:e[(0,i._DJB2)(t)]),{result:n,details:this._getDetails(null==n)}}getCurrentSourceDetails(){return"Uninitialized"===this._source||"NoValues"===this._source?{reason:this._source}:{reason:this._source,lcut:this._lcut,receivedAt:this._receivedAt}}_getDetails(e){const t=this.getCurrentSourceDetails();let n=t.reason;return"Uninitialized"!==n&&"NoValues"!==n&&(n=`${n}:${e?"Unrecognized":"Recognized"}`),Object.assign(Object.assign({},t),{reason:n})}}},944:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(978),s=n(694);class o extends r.NetworkCore{constructor(e,t){super(e,t);const n=null==e?void 0:e.networkConfig;this._initializeUrl=(0,r._getOverridableUrl)(null==n?void 0:n.initializeUrl,null==n?void 0:n.api,"/initialize",r.NetworkDefault.initializeApi)}fetchEvaluations(e,t,n,s){return i(this,void 0,void 0,(function*(){const i=t?(0,r._typedJsonParse)(t,"has_updates","InitializeResponse"):null;let o={user:s,hash:"djb2",deltasResponseRequested:!1};return(null==i?void 0:i.has_updates)&&(o=Object.assign(Object.assign({},o),{sinceTime:i.time,previousDerivedFields:"derived_fields"in i?i.derived_fields:{},deltasResponseRequested:!0})),this._fetchEvaluations(e,i,o,n)}))}_fetchEvaluations(e,t,n,r){var o,a;return i(this,void 0,void 0,(function*(){const i=yield this.post({sdkKey:e,url:this._initializeUrl,data:n,retries:2,isStatsigEncodable:!0,priority:r,isInitialize:!0});if(204===(null==i?void 0:i.code))return'{"has_updates": false}';if(200!==(null==i?void 0:i.code))return null!==(o=null==i?void 0:i.body)&&void 0!==o?o:null;if(!0!==(null==t?void 0:t.has_updates)||!0!==(null===(a=i.body)||void 0===a?void 0:a.includes('"is_delta":true'))||!0!==n.deltasResponseRequested)return i.body;const l=(0,s._resolveDeltasResponse)(t,i.body);return"string"==typeof l?l:this._fetchEvaluations(e,t,Object.assign(Object.assign(Object.assign({},n),l),{deltasResponseRequested:!1}),r)}))}}t.default=o},999:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._makeParamStoreGetter=void 0;const i=n(978),r={disableExposureLog:!0};function s(e){return null==e||!1===e.disableExposureLog}function o(e,t){return null!=t&&!(0,i._isTypeMatch)(e,t)}t._makeParamStoreGetter=function(e,t,n){return(a,l)=>{if(null==t)return l;const u=t[a];if(null==u||null!=l&&(0,i._typeOf)(l)!==u.param_type)return l;switch(u.ref_type){case"static":return function(e,t){return e.value}(u);case"gate":return function(e,t,n){return e.getFeatureGate(t.gate_name,s(n)?void 0:r).value?t.pass_value:t.fail_value}(e,u,n);case"dynamic_config":return function(e,t,n,i){const a=e.getDynamicConfig(t.config_name,r).get(t.param_name);return o(a,n)?n:(s(i)&&e.getDynamicConfig(t.config_name),a)}(e,u,l,n);case"experiment":return function(e,t,n,i){const a=e.getExperiment(t.experiment_name,r).get(t.param_name);return o(a,n)?n:(s(i)&&e.getExperiment(t.experiment_name),a)}(e,u,l,n);case"layer":return function(e,t,n,i){const a=e.getLayer(t.layer_name,r).get(t.param_name);return o(a,n)?n:(s(i)&&e.getLayer(t.layer_name).get(t.param_name),a)}(e,u,l,n);default:return l}}}},686:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(978),s=n(677),o=n(944),a=n(999),l=n(451);class u extends r.StatsigClientBase{static instance(e){const t=(0,r._getStatsigGlobal)().instance(e);return t instanceof u?t:(r.Log.warn((0,r._isServerEnv)()?"StatsigClient.instance is not supported in server environments":"Unable to find StatsigClient instance"),new u(null!=e?e:"",{}))}constructor(e,t,n=null){var i;r.SDKType._setClientType(e,"javascript-client");const a=new o.default(n,(e=>{this.$emt(e)}));super(e,null!==(i=null==n?void 0:n.dataAdapter)&&void 0!==i?i:new l.StatsigEvaluationsDataAdapter,a,n),this._store=new s.default,this._user=(0,r._normalizeUser)(t,n)}initializeSync(e){this._logger.start(),this.updateUserSync(this._user,e)}initializeAsync(e){return i(this,void 0,void 0,(function*(){return r.Storage.isReady()||(yield r.Storage.isReadyResolver()),this._logger.start(),this.updateUserAsync(this._user,e)}))}updateUserSync(e,t){this._resetForUser(e);const n=this.dataAdapter.getDataSync(this._user);this._store.setValues(n),this._finalizeUpdate(n),(null==t?void 0:t.disableBackgroundCacheRefresh)||this._runPostUpdate(null!=n?n:null,this._user)}updateUserAsync(e,t){return i(this,void 0,void 0,(function*(){this._resetForUser(e);const n=this._user;r.Diagnostics._markInitOverallStart(this._sdkKey);let i=this.dataAdapter.getDataSync(n);if(this._store.setValues(i),this._setStatus("Loading",i),i=yield this.dataAdapter.getDataAsync(i,n,t),n!==this._user)return;let s=!1;null!=i&&(r.Diagnostics._markInitProcessStart(this._sdkKey),s=this._store.setValues(i),r.Diagnostics._markInitProcessEnd(this._sdkKey,{success:s})),this._finalizeUpdate(i),r.Diagnostics._markInitOverallEnd(this._sdkKey,s,this._store.getCurrentSourceDetails()),r.Diagnostics._enqueueDiagnosticsEvent(this._user,this._logger,this._sdkKey,this._options)}))}getContext(){return{sdkKey:this._sdkKey,options:this._options,values:this._store.getValues(),user:JSON.parse(JSON.stringify(this._user)),errorBoundary:this._errorBoundary,session:r.StatsigSession.get(this._sdkKey),stableID:r.StableID.get(this._sdkKey)}}checkGate(e,t){return this.getFeatureGate(e,t).value}getFeatureGate(e,t){var n,i;const{result:s,details:o}=this._store.getGate(e),a=(0,r._makeFeatureGate)(e,o,s),l=null===(i=null===(n=this.overrideAdapter)||void 0===n?void 0:n.getGateOverride)||void 0===i?void 0:i.call(n,a,this._user,t),u=null!=l?l:a;return this._enqueueExposure(e,(0,r._createGateExposure)(this._user,u),t),this.$emt({name:"gate_evaluation",gate:u}),u}getDynamicConfig(e,t){var n,i;const{result:s,details:o}=this._store.getConfig(e),a=(0,r._makeDynamicConfig)(e,o,s),l=null===(i=null===(n=this.overrideAdapter)||void 0===n?void 0:n.getDynamicConfigOverride)||void 0===i?void 0:i.call(n,a,this._user,t),u=null!=l?l:a;return this._enqueueExposure(e,(0,r._createConfigExposure)(this._user,u),t),this.$emt({name:"dynamic_config_evaluation",dynamicConfig:u}),u}getExperiment(e,t){var n,i;const{result:s,details:o}=this._store.getConfig(e),a=(0,r._makeExperiment)(e,o,s),l=null===(i=null===(n=this.overrideAdapter)||void 0===n?void 0:n.getExperimentOverride)||void 0===i?void 0:i.call(n,a,this._user,t),u=null!=l?l:a;return this._enqueueExposure(e,(0,r._createConfigExposure)(this._user,u),t),this.$emt({name:"experiment_evaluation",experiment:u}),u}getLayer(e,t){var n,i,s;const{result:o,details:a}=this._store.getLayer(e),l=(0,r._makeLayer)(e,a,o),u=null===(i=null===(n=this.overrideAdapter)||void 0===n?void 0:n.getLayerOverride)||void 0===i?void 0:i.call(n,l,this._user,t),c=(0,r._mergeOverride)(l,u,null!==(s=null==u?void 0:u.__value)&&void 0!==s?s:l.__value,(n=>{this._enqueueExposure(e,(0,r._createLayerParameterExposure)(this._user,c,n),t)}));return this.$emt({name:"layer_evaluation",layer:c}),c}getParameterStore(e,t){const{result:n,details:i}=this._store.getParamStore(e);return this._logger.incrementNonExposureCount(e),{name:e,details:i,__configuration:n,get:(0,a._makeParamStoreGetter)(this,n,t)}}logEvent(e,t,n){const i="string"==typeof e?{eventName:e,value:t,metadata:n}:e;this._logger.enqueue(Object.assign(Object.assign({},i),{user:this._user,time:Date.now()}))}_primeReadyRipcord(){this.$on("error",(()=>{"Loading"===this.loadingStatus&&this._finalizeUpdate(null)}))}_finalizeUpdate(e){this._store.finalize(),this._setStatus("Ready",e)}_runPostUpdate(e,t){this.dataAdapter.getDataAsync(e,t,{priority:"low"}).catch((e=>{r.Log.error("An error occurred after update.",e)}))}_resetForUser(e){var t;this._logger.reset(),this._store.reset(),this._user=(0,r._normalizeUser)(e,this._options);const n=null===(t=this._user.customIDs)||void 0===t?void 0:t.stableID;n&&r.StableID.setOverride(n,this._sdkKey)}}t.default=u},451:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigEvaluationsDataAdapter=void 0;const r=n(978),s=n(944);class o extends r.DataAdapterCore{constructor(){super("EvaluationsDataAdapter","evaluations"),this._network=null,this._options=null}attach(e,t){super.attach(e,t),this._network=new s.default(null!=t?t:{})}getDataAsync(e,t,n){return this._getDataAsyncImpl(e,(0,r._normalizeUser)(t,this._options),n)}prefetchData(e,t){return this._prefetchDataImpl(e,t)}setData(e){const t=(0,r._typedJsonParse)(e,"has_updates","data");t&&"user"in t?super.setData(e,t.user):r.Log.error("StatsigUser not found")}setDataLegacy(e,t){super.setData(e,t)}_fetchFromNetwork(e,t,n){var r;return i(this,void 0,void 0,(function*(){const i=yield null===(r=this._network)||void 0===r?void 0:r.fetchEvaluations(this._getSdkKey(),e,null==n?void 0:n.priority,t);return null!=i?i:null}))}_getCacheKey(e){var t;const n=(0,r._getStorageKey)(this._getSdkKey(),e,null===(t=this._options)||void 0===t?void 0:t.customUserCacheKeyFunc);return`${r.DataAdapterCachePrefix}.${this._cacheSuffix}.${n}`}_isCachedResultValidFor204(e,t){return null!=e.fullUserHash&&e.fullUserHash===(0,r._getFullUserHash)(t)}}t.StatsigEvaluationsDataAdapter=o},138:(e,t,n)=>{t.hf=void 0;const i=n(686);t.hf=i.default,__STATSIG__=Object.assign(Object.assign({},null!==__STATSIG__&&void 0!==__STATSIG__?__STATSIG__:{}),{StatsigClient:i.default}),__STATSIG__},463:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AutoCapture=t.runStatsigAutoCapture=void 0;const i=n(978),r=n(181),s=n(562);t.runStatsigAutoCapture=function(e){return new o(e)};class o{constructor(e){var t,n,r;this._client=e,this._startTime=Date.now(),this._deepestScroll=0,this._disabledEvents={};const{sdkKey:s,errorBoundary:o,values:a}=e.getContext();this._disabledEvents=null!==(n=null===(t=null==a?void 0:a.auto_capture_settings)||void 0===t?void 0:t.disabled_events)&&void 0!==n?n:{},this._errorBoundary=o,this._errorBoundary.wrap(this);const l=(0,i._getDocumentSafe)();if(!(0,i._isServerEnv)()){__STATSIG__=(0,i._getStatsigGlobal)();const e=null!==(r=__STATSIG__.acInstances)&&void 0!==r?r:{};e[s]=this,__STATSIG__.acInstances=e}"loading"!==(null==l?void 0:l.readyState)?this._initialize():l.addEventListener("DOMContentLoaded",(()=>this._initialize()))}_addEventHandlers(){const e=(0,i._getWindowSafe)(),t=(0,i._getDocumentSafe)();if(!e||!t)return;const n=t=>{this._autoLogEvent(t||e.event)};(0,r._registerEventHandler)(t,"click",n),(0,r._registerEventHandler)(t,"submit",n),(0,r._registerEventHandler)(e,"error",n),(0,r._registerEventHandler)(e,"beforeunload",(()=>this._pageUnloadHandler())),(0,r._registerEventHandler)(e,"scroll",(()=>this._scrollEventHandler()))}_autoLogEvent(e){var t;let n=null===(t=e.type)||void 0===t?void 0:t.toLowerCase();if("error"===n&&e instanceof ErrorEvent)return void this._logError(e);const i=(0,r._getTargetNode)(e);if(!i)return;if(!(0,r._shouldLogEvent)(e,i))return;"submit"===n&&(n="form_submit");const{value:s,metadata:o}=(0,r._gatherEventData)(i);this._enqueueAutoCapture(n,s,o)}_initialize(){this._addEventHandlers(),this._logSessionStart(),this._logPageView(),this._logPerformance()}_logError(e){const t=(null==e?void 0:e.error)||{};let n=t;if("object"==typeof t)try{n=JSON.stringify(t)}catch(e){n="function"==typeof(null==t?void 0:t.toString)?t.toString():"Unknown Error"}this._enqueueAutoCapture("error",e.message,{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,error_str:n})}_logSessionStart(){const e=this._getSessionFromClient();try{if(!this._isNewSession(e))return;this._enqueueAutoCapture("session_start",(0,r._getSanitizedPageUrl)(),{sessionID:e.data.sessionID},{flushImmediately:!0})}catch(e){this._errorBoundary.logError("AC::logSession",e)}}_logPageView(){setTimeout((()=>{const e=(0,r._getSafeUrl)(),t=(0,s._gatherPageViewPayload)(e);this._enqueueAutoCapture("page_view",(0,r._getSanitizedPageUrl)(),t,{flushImmediately:!0,addNewSessionMetadata:!0})}),1)}_logPerformance(){const e=(0,i._getWindowSafe)();void 0!==(null==e?void 0:e.performance)&&"function"==typeof e.performance.getEntriesByType&&"function"==typeof e.performance.getEntriesByName&&setTimeout((()=>{const t={},n=e.performance.getEntriesByType("navigation");if(n&&n.length>0&&n[0]instanceof PerformanceNavigationTiming){const e=n[0];t.load_time_ms=e.duration,t.dom_interactive_time_ms=e.domInteractive-e.startTime,t.redirect_count=e.redirectCount,t.transfer_bytes=e.transferSize}const i=e.performance.getEntriesByName("first-contentful-paint");i&&i.length>0&&i[0]instanceof PerformancePaintTiming&&(t.first_contentful_paint_time_ms=i[0].startTime);const s=(0,r._getSafeNetworkInformation)();s&&(t.effective_connection_type=s.effectiveType,t.rtt_ms=s.rtt,t.downlink_kbps=s.downlink,t.save_data=s.saveData),this._enqueueAutoCapture("performance",(0,r._getSanitizedPageUrl)(),t)}),1)}_pageUnloadHandler(){this._enqueueAutoCapture("page_view_end",(0,r._getSanitizedPageUrl)(),{scrollDepth:this._deepestScroll,pageViewLength:Date.now()-this._startTime},{flushImmediately:!0})}_enqueueAutoCapture(e,t,n,r){var s,o,a;if(this._disabledEvents[e])return;const l=this._getSessionFromClient();try{const u=Object.assign({sessionID:l.data.sessionID,page_url:null!==(a=null===(o=null===(s=(0,i._getWindowSafe)())||void 0===s?void 0:s.location)||void 0===o?void 0:o.href)&&void 0!==a?a:""},n);(null==r?void 0:r.addNewSessionMetadata)&&(u.isNewSession=String(this._isNewSession(l)));const c={eventName:`auto_capture::${e}`,value:t,metadata:u};this._client.logEvent(c),(null==r?void 0:r.flushImmediately)&&this._client.flush().catch((e=>{i.Log.error(e)}))}catch(e){this._errorBoundary.logError("AC::enqueue",e)}}_scrollEventHandler(){var e,t,n,r;const s=null!==(t=null===(e=(0,i._getDocumentSafe)())||void 0===e?void 0:e.body.scrollHeight)&&void 0!==t?t:1,o=(0,i._getWindowSafe)(),a=null!==(n=null==o?void 0:o.scrollY)&&void 0!==n?n:1,l=null!==(r=null==o?void 0:o.innerHeight)&&void 0!==r?r:1;this._deepestScroll=Math.max(this._deepestScroll,Math.min(100,Math.round((a+l)/s*100)))}_isNewSession(e){return Math.abs(e.data.startTime-Date.now())<1e3}_getSessionFromClient(){return this._client.getContext().session}}t.AutoCapture=o},181:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._getSafeNetworkInformation=t._registerEventHandler=t._getSanitizedPageUrl=t._getSafeUrl=t._shouldLogEvent=t._getTargetNode=t._gatherEventData=t._gatherDatasetProperties=void 0;const i=n(978);function r(e){const t={};if(!e)return t;const n=null==e?void 0:e.dataset;if(!n)return t;for(const e in n)t[`data-${e}`]=n[e]||"";return t}function s(e){if(!e)return null;let t=e;for(;t;){const e=t.tagName.toLowerCase();if(["body","document"].includes(e))return null;if("a"===t.tagName.toLowerCase())return t;t=t.parentElement}return null}t._gatherDatasetProperties=r,t._gatherEventData=function(e){var t;const n=e.tagName.toLowerCase(),o={},a=(0,i._getCurrentPageUrlSafe)()||"";o.tagName=n,"form"===n&&(o.action=e.getAttribute("action"),o.method=null!==(t=e.getAttribute("method"))&&void 0!==t?t:"GET",o.formName=e.getAttribute("name"),o.formId=e.getAttribute("id")),["input","select","textarea"].includes(n)&&"password"!==e.getAttribute("type")&&(o.content=e.value,o.inputName=e.getAttribute("name"));const l=s(e);if(l&&(o.href=l.getAttribute("href")),"button"===n||l){o.content=(e.textContent||"").trim();const t=r(l||e);Object.assign(o,t)}return{value:a,metadata:o}},t._getTargetNode=function(e){if(!e)return null;let t=e.target||e.srcElement;return t&&t instanceof Element?(3===t.nodeType&&(t=t.parentNode||null),t):null},t._shouldLogEvent=function(e,t){if(!e||!t||1!==t.nodeType)return!1;const n=t.tagName.toLowerCase(),i=e.type.toLowerCase();switch(n){case"html":return!1;case"form":return"submit"===i;case"input":case"select":case"textarea":return["change"].includes(i);default:if("click"===i){if("button"===n)return!0;if(s(t))return!0}return!1}},t._getSafeUrl=function(){var e,t,n;const r=null!==(n=null===(t=null===(e=(0,i._getWindowSafe)())||void 0===e?void 0:e.location)||void 0===t?void 0:t.href)&&void 0!==n?n:"";let s;try{s=new URL(r)}catch(e){s=new URL("error:")}return s},t._getSanitizedPageUrl=function(){return(0,i._getCurrentPageUrlSafe)()||""},t._registerEventHandler=function(e,t,n){e&&e.addEventListener&&e.addEventListener(t,n,!0)},t._getSafeNetworkInformation=function(){const e=(0,i._getWindowSafe)();if(!e||!e.navigator)return null;return e.navigator.connection||null}},500:(e,t,n)=>{t.gX=void 0;const i=n(463);Object.defineProperty(t,"gX",{enumerable:!0,get:function(){return i.runStatsigAutoCapture}}),__STATSIG__=Object.assign(Object.assign({},null!==__STATSIG__&&void 0!==__STATSIG__?__STATSIG__:{}),{AutoCapture:i.AutoCapture,runStatsigAutoCapture:i.runStatsigAutoCapture}),__STATSIG__},562:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._gatherPageViewPayload=void 0;const i=n(978);t._gatherPageViewPayload=function(e){var t,n;const r=(0,i._getDocumentSafe)(),s=(0,i._getWindowSafe)();if(!r||!s)return{};const o=null==s?void 0:s.navigator,a=(null==r?void 0:r.referrer)||"";let l=new URL("empty:");if(a)try{l=new URL(a||"empty:")}catch(e){}const u=function(e){const t=function(e){const t=e.hostname;return["google","bing","yahoo","duckduckgo","baidu"].find((e=>t.includes(e+".")))||""}(e);return{searchEngine:t,searchQuery:e.searchParams.get("yahoo"===t?"p":"q")||""}}(l),c=function(e){const t=e.searchParams,n={};return["utm_source","utm_medium","utm_campaign","utm_term","utm_content","gclid","gclsrc","dclid","fbclid","msclkid","mc_eid","mc_cid","twclid","li_fat_id","igshid","utm_id","ttc","ttclid","ttc_id"].forEach((e=>{const i=t.get(e);i&&(n[e]=i)})),n}(e),d={};return e.searchParams.forEach(((e,t)=>{d[t]=e})),Object.assign(Object.assign(Object.assign(Object.assign({},u),c),d),{title:(null==r?void 0:r.title)||"",locale:(null==o?void 0:o.language)||"unknown",hostname:e.hostname||"unknown",pathname:e.pathname||"unknown",referrer:a,screen_width:(null===(t=null==s?void 0:s.screen)||void 0===t?void 0:t.width)||"unknown",screen_height:(null===(n=null==s?void 0:s.screen)||void 0===n?void 0:n.height)||"unknown",viewport_width:(null==s?void 0:s.innerWidth)||"unknown",viewport_height:(null==s?void 0:s.innerHeight)||"unknown"})}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e=n(138),t=n(500);if(window.StatsigSidecar=window.StatsigSidecar||{_statsigInstance:null,_queuedEvents:[],_clientInitialized:!1,getStatsigInstance:function(){return this._statsigInstance},_getMatchingExperiments:function(){const e=this._statsigInstance.getDynamicConfig("sidecar_dynamic_config");if(!e)return null;const t=e.get("activeExperiments",[]),n=[];let i=window.location.href;try{const e=new URL(i);e.searchParams.has("overrideuser")&&e.searchParams.delete("overrideuser"),i=e.toString()}catch(e){}return t.forEach((e=>{const t=e.filters||[],r=e.filterType||"all";this._isMatchingExperiment(i,r,t)&&n.push(e.id)})),n},_isMatchingExperiment:function(e,t,n){if("all"===t||0===n.length)return!0;if("contains"===t)return n.some((t=>e.includes(t)));if("equals"===t)return n.some((t=>e===t));if("regex"===t)return n.some((t=>RegExp(t).test(e)));if("path"===t){const t=new URL(e).pathname;return n.some((e=>t===e))}return!1},_flushQueuedEvents:function(){if(0===this._queuedEvents.length)return;if(!this._statsigInstance)return;const e=[...this._queuedEvents];this._queuedEvents=[],e.forEach((e=>{this._statsigInstance.logEvent(e.eventName,e.value,e.metadata)})),this._statsigInstance.flushEvents()},_isIOS:function(){return/iPad|iPhone|iPod/.test(navigator?.userAgent??"")},logEvent:function(e,t,n){this._statsigInstance&&this._clientInitialized?(this._flushQueuedEvents(),this._statsigInstance.logEvent(e,t,n)):this._queuedEvents.push({eventName:e,value:t,metadata:n})},performContentChange:function(e,t){if(!e)return;const n=document.querySelector(e);n&&this.observeMutation(n,(()=>{n.innerHTML!==t&&(n.innerHTML=t)}))},performReorderElement:function(e,t,n){if(!e)return;const i=document.querySelector(e),r=document.querySelector(n);if(i&&r)switch(t){case"before":r.before(i);break;case"after":r.after(i);break;case"first":r.prepend(i);break;case"last":r.append(i)}},performStyleChange:function(e,t){if(!e)return;const n=document.querySelector(e);if(n){const e=`${n.getAttribute("style")||""}; ${t}`;this.observeMutation(n,(()=>{n.getAttribute("style")!==e&&n.setAttribute("style",e)}))}},performAttributeChange:function(e,t,n,i=[]){if(!e)return;const r=document.querySelector(e);r&&this.observeMutation(r,(()=>{r.getAttribute(t)!==n&&(r.setAttribute(t,n),i?.forEach((e=>{r.removeAttribute(e)})))}))},performInjectScript:function(e){const t=document.createElement("script");t.setAttribute("nonce",this.scriptNonce),t.nonce=this.scriptNonce,t.innerHTML=e,document.head.appendChild(t)},performInjectStyle:function(e){const t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)},_performDirective:function(e){switch(e.actionType){case"content-change":this._performAfterLoad((()=>{this.performContentChange(e.queryPath,e.value)}));break;case"style-change":this._performAfterLoad((()=>{this.performStyleChange(e.queryPath,e.value)}));break;case"image-change":this._performAfterLoad((()=>{this.performAttributeChange(e.queryPath,"src",e.value,["srcset"])}));break;case"reorder-element":this._performAfterLoad((()=>{this.performReorderElement(e.queryPath,e.operator,e.anchorQueryPath)}));break;case"inject-script":this.performInjectScript(e.value);break;case"inject-style":this.performInjectStyle(e.value);break;case"redirect-page":this.redirectPage(e.value)}},_performAfterLoad:function(e){/complete|interactive|loaded/.test(document.readyState)?e():document.addEventListener("DOMContentLoaded",(()=>{e()}))},_performExperiments:function(e){Array.isArray(e)&&e.forEach((e=>{this._statsigInstance.getExperiment(e).get("directives",[]).forEach((e=>{try{this._performDirective(e)}catch(e){console.error("Failed to perform directive:",e)}}))}))},processEvent:function(e){if(!e||!e.detail)return!1;const t=e.detail;return"inject-script"===t.name?(this.performInjectScript(t.value),!1):void 0},observeMutation:function(e,t){new MutationObserver(((e,n)=>{setTimeout((()=>{t()}),0)})).observe(e,{attributes:!0,childList:!0}),t()},redirectPage:async function(e){if(this._flushQueuedEvents(),window&&window.location&&e&&window.location.href!=e)try{const t=new URL(window.location.href),n=new URL(e,t);for(const e of t.searchParams.keys())n.searchParams.has(e)||n.searchParams.set(e,t.searchParams.get(e));this._isIOS()&&await this._statsigInstance.flush(),window.location.href=n.toString()}catch(t){window.location.href=e}},resetBody:function(){const e=document.getElementById("__sbpd");e&&e.parentElement.removeChild(e)},setupStatsigSdk:async function(n,i,r,s,o){let a=null;try{a=new URL(window.location.href).searchParams.get("overrideuser")}catch(e){console.error("Failed to update user:",e)}try{const l=window?.statsigUser??(a?{userID:a,customIDs:{stableID:a}}:{}),u=window?.statsigOptions??{};u.disableLogging=!r,(s||o)&&(u.networkConfig={initializeUrl:s,logEventUrl:o}),this._statsigInstance=new e.hf(n,l,u),await this._statsigInstance.initializeAsync(),(0,t.gX)(this._statsigInstance),this._clientInitialized=!0,this._flushQueuedEvents(),i||(i=this._getMatchingExperiments()),i&&this._performExperiments(i)}catch(e){console.error("Failed to initialize Statsig:",e)}this.resetBody(),window?.postExperimentCallback&&window.postExperimentCallback(this._statsigInstance,i)}},document.currentScript&&document.currentScript.src){const e=new URL(document.currentScript.src),t=e.searchParams.get("apikey"),n=e.searchParams.get("multiexpids"),i=e.searchParams.get("initializeurl"),r=e.searchParams.get("logeventurl"),s="0"!==e.searchParams.get("autostart"),o="0"!==e.searchParams.get("reduceflicker");if(StatsigSidecar.scriptNonce=document.currentScript.nonce,t){o&&(document.write('<style id="__sbpd">body { display: none; }</style>\n'),setTimeout((()=>{StatsigSidecar.resetBody()}),1e3));const e=n?n.split(","):null;StatsigSidecar.setupStatsigSdk(t,e,s,i,r),document.addEventListener(`sidecar_${t}`,(e=>{StatsigSidecar.processEvent(e),e.preventDefault()}))}}})()})();
//# sourceMappingURL=index.js.map